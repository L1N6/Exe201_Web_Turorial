@using EXE201_Tutor_Web.Entities;

<style>
    .material-symbols-search-rounded {
        position: relative;
        width: calc(24 * var(--rpx));
        height: calc(24 * var(--rpx));
        margin: calc(2 * var(--rpx)) 0 0 calc(24 * var(--rpx));
        overflow: hidden;
    }

    .rectangle-7 {
        position: relative;
        width: calc(1220 * var(--rpx));
        height: calc(244 * var(--rpx));
        margin: 0 0 0 calc(112 * var(--rpx));
        background: #e6edff;
        z-index: 22;
        border-radius: calc(55 * var(--rpx));
    }

    .rectangle-8 {
        position: absolute;
        width: calc(302 * var(--rpx));
        height: calc(189 * var(--rpx));
        top: calc(24 * var(--rpx));
        left: calc(890 * var(--rpx));
        background: url(./assets/images/b06ca55e-bceb-49cd-91d2-04ae54a7d293.png) no-repeat center;
        background-size: cover;
        z-index: 23;
    }

    .khoa-hoc-hang-dau {
        display: flex;
        align-items: flex-start;
        justify-content: flex-start;
        position: absolute;
        height: calc(56 * var(--rpx));
        top: calc(32 * var(--rpx));
        left: calc(60 * var(--rpx));
        color: #3420b3;
        font-family: Inter, var(--default-font-family);
        font-size: calc(50 * var(--rpx));
        font-weight: 700;
        line-height: calc(56 * var(--rpx));
        text-align: left;
        white-space: nowrap;
        z-index: 24;
    }

    .rectangle-9 {
        position: absolute;
        width: calc(397 * var(--rpx));
        height: calc(40 * var(--rpx));
        top: calc(110 * var(--rpx));
        left: calc(60 * var(--rpx));
        background: #614ce0;
        z-index: 28;
        border-radius: calc(28 * var(--rpx));
    }

    .giam-20-cho-khoa-hoc-dau-tien {
        position: absolute;
        width: calc(360 * var(--rpx));
        height: calc(31 * var(--rpx));
        top: calc(6 * var(--rpx));
        left: calc(16 * var(--rpx));
        cursor: pointer;
        color: #ffffff;
        font-family: Inter, var(--default-font-family);
        font-size: calc(23 * var(--rpx));
        font-weight: 500;
        line-height: calc(27.83522605895996 * var(--rpx));
        white-space: nowrap;
        background: transparent;
        border: none;
        z-index: 29;
    }

    .software-engineer {
        display: flex;
        align-items: flex-start;
        justify-content: flex-start;
        position: absolute;
        height: calc(30 * var(--rpx));
        top: calc(184 * var(--rpx));
        left: calc(562 * var(--rpx));
        color: #614ce0;
        font-family: Inter, var(--default-font-family);
        font-size: calc(25 * var(--rpx));
        font-weight: 400;
        line-height: calc(30 * var(--rpx));
        text-align: left;
        white-space: nowrap;
        z-index: 38;
    }

    .graphic-design {
        display: flex;
        align-items: flex-start;
        justify-content: flex-start;
        position: absolute;
        height: calc(21 * var(--rpx));
        top: calc(184 * var(--rpx));
        left: calc(277 * var(--rpx));
        color: #614ce0;
        font-family: Inter, var(--default-font-family);
        font-size: calc(25 * var(--rpx));
        font-weight: 400;
        line-height: calc(21 * var(--rpx));
        text-align: left;
        white-space: nowrap;
        z-index: 35;
    }

    .language {
        display: flex;
        align-items: flex-start;
        justify-content: flex-start;
        position: absolute;
        height: calc(21 * var(--rpx));
        top: calc(184 * var(--rpx));
        left: calc(73 * var(--rpx));
        color: #614ce0;
        font-family: Inter, var(--default-font-family);
        font-size: calc(25 * var(--rpx));
        font-weight: 400;
        line-height: calc(21 * var(--rpx));
        text-align: left;
        white-space: nowrap;
        z-index: 25;
    }

    .flex-row-ff {
        position: relative;
        display: flex;
        flex-wrap: nowrap;
        flex-direction: column;
        width: calc(1440 * var(--rpx));
        height: calc(341 * var(--rpx));
        margin: calc(38 * var(--rpx)) 0 calc(20 * var(--rpx)) calc(2 * var(--rpx));
        z-index: 40;
    }

    .rectangle-a {
        position: absolute;
        width: calc(236 * var(--rpx));
        height: calc(264 * var(--rpx));
        top: calc(30 * var(--rpx));
        left: calc(92 * var(--rpx));
        background: url(./assets/images/3bb3a2f5595668b366994461aa93a474014fe617.png) no-repeat center;
        background-size: cover;
        z-index: 39;
        border-radius: calc(226 * var(--rpx));
    }

    .rectangle-b {
        position: absolute;
        width: calc(236 * var(--rpx));
        height: calc(264 * var(--rpx));
        top: 0;
        left: calc(743 * var(--rpx));
        background: url(./assets/images/c321bb992e83fc5ae60cb9cf2bc9fba4a680fc9d.png) no-repeat center;
        background-size: cover;
        z-index: 40;
        border-radius: calc(226 * var(--rpx));
    }

    .rectangle-c {
        position: absolute;
        width: calc(1440 * var(--rpx));
        height: calc(310 * var(--rpx));
        top: calc(31 * var(--rpx));
        left: 0;
        background: #f7f9ff;
        z-index: 3;
    }

    .rectangle-d {
        position: relative;
        width: calc(1440 * var(--rpx));
        height: calc(310 * var(--rpx));
        top: 0;
        left: 0;
        font-size: 0px;
        background: #f7f9ff;
        z-index: 4;
    }

    .tinh-nang-dang-phat-trien {
        display: block;
        position: relative;
        height: calc(21 * var(--rpx));
        margin: calc(43 * var(--rpx)) 0 0 calc(370 * var(--rpx));
        color: #fdb600;
        font-family: Inter, var(--default-font-family);
        font-size: calc(15 * var(--rpx));
        font-weight: 600;
        line-height: calc(18.15340805053711 * var(--rpx));
        text-align: left;
        white-space: nowrap;
        z-index: 10;
    }

    .flex-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: relative;
        width: calc(950 * var(--rpx));
        height: calc(40 * var(--rpx));
        margin: calc(8 * var(--rpx)) 0 0 calc(370 * var(--rpx));
        z-index: 34;
    }

    .c-basic {
        flex-shrink: 0;
        position: relative;
        width: calc(500 * var(--rpx));
        height: calc(40 * var(--rpx));
        color: #614ce0;
        font-family: Inter, var(--default-font-family);
        font-size: calc(35 * var(--rpx));
        font-weight: 700;
        line-height: calc(40 * var(--rpx));
        text-align: left;
        z-index: 26;
        overflow-wrap: break-word;
    }


    .tieng-anh-co-ban {
        flex-shrink: 0;
        position: relative;
        height: calc(40 * var(--rpx));
        color: #614ce0;
        font-family: Inter, var(--default-font-family);
        font-size: calc(35 * var(--rpx));
        font-weight: 700;
        line-height: calc(40 * var(--rpx));
        text-align: left;
        white-space: nowrap;
        z-index: 34;
    }

    .flex-row-aa {
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: relative;
        width: calc(971 * var(--rpx));
        height: calc(31 * var(--rpx));
        margin: calc(8 * var(--rpx)) 0 0 calc(370 * var(--rpx));
        z-index: 30;
    }

    .time {
        flex-shrink: 0;
        position: relative;
        height: calc(31 * var(--rpx));
        color: #614ce0;
        font-family: Inter, var(--default-font-family);
        font-size: calc(23 * var(--rpx));
        font-weight: 500;
        line-height: calc(27.83522605895996 * var(--rpx));
        text-align: left;
        white-space: nowrap;
        z-index: 27;
    }

    .time-e {
        flex-shrink: 0;
        position: relative;
        height: calc(31 * var(--rpx));
        color: #614ce0;
        font-family: Inter, var(--default-font-family);
        font-size: calc(23 * var(--rpx));
        font-weight: 500;
        line-height: calc(27.83522605895996 * var(--rpx));
        text-align: left;
        white-space: nowrap;
        z-index: 30;
    }

    .flex-row-c {
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: relative;
        width: calc(971 * var(--rpx));
        height: calc(69 * var(--rpx));
        margin: calc(13 * var(--rpx)) 0 0 calc(370 * var(--rpx));
        z-index: 32;
    }

    .mo-ta {
        display: flex;
        align-items: flex-start;
        justify-content: flex-start;
        flex-shrink: 0;
        position: relative;
        width: calc(320 * var(--rpx));
        height: calc(69 * var(--rpx));
        color: #614ce0;
        font-family: Inter, var(--default-font-family);
        font-size: calc(18 * var(--rpx));
        font-weight: 500;
        line-height: calc(21.784090042114258 * var(--rpx));
        text-align: left;
        z-index: 31;
    }

    .mo-ta-tuan-hoc {
        display: flex;
        align-items: flex-start;
        justify-content: flex-start;
        flex-shrink: 0;
        position: relative;
        width: calc(320 * var(--rpx));
        height: calc(69 * var(--rpx));
        color: #614ce0;
        font-family: Inter, var(--default-font-family);
        font-size: calc(18 * var(--rpx));
        font-weight: 500;
        line-height: calc(21.784090042114258 * var(--rpx));
        text-align: left;
        z-index: 32;
    }

    .flex-row-cb {
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: relative;
        width: calc(867 * var(--rpx));
        height: calc(22 * var(--rpx));
        margin: calc(14 * var(--rpx)) 0 0 calc(140 * var(--rpx));
        z-index: 41;
    }

    .software-engineer-f {
        flex-shrink: 0;
        position: relative;
        height: calc(21 * var(--rpx));
        color: #614ce0;
        font-family: Inter, var(--default-font-family);
        font-size: calc(15 * var(--rpx));
        font-weight: 400;
        line-height: calc(18.15340805053711 * var(--rpx));
        text-align: left;
        white-space: nowrap;
        z-index: 36;
    }

    .fundamental-of-english-grammar {
        display: flex;
        align-items: flex-start;
        justify-content: center;
        flex-shrink: 0;
        position: relative;
        width: calc(292 * var(--rpx));
        height: calc(21 * var(--rpx));
        color: #614ce0;
        font-family: Inter, var(--default-font-family);
        font-size: calc(15 * var(--rpx));
        font-weight: 400;
        line-height: calc(18.15340805053711 * var(--rpx));
        text-align: center;
        white-space: nowrap;
        z-index: 41;
    }

    .flex-row-b {
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: relative;
        width: calc(801 * var(--rpx));
        height: calc(22 * var(--rpx));
        margin: calc(1 * var(--rpx)) 0 0 calc(135 * var(--rpx));
        z-index: 42;
    }

    .ky-thuat-phan-mem {
        flex-shrink: 0;
        position: relative;
        height: calc(21 * var(--rpx));
        color: #614ce0;
        font-family: Inter, var(--default-font-family);
        font-size: calc(15 * var(--rpx));
        font-weight: 400;
        line-height: calc(18.15340805053711 * var(--rpx));
        text-align: left;
        white-space: nowrap;
        z-index: 37;
    }

    .ngon-ngu-anh {
        display: flex;
        align-items: flex-start;
        justify-content: center;
        flex-shrink: 0;
        position: relative;
        width: calc(150 * var(--rpx));
        height: calc(21 * var(--rpx));
        color: #614ce0;
        font-family: Inter, var(--default-font-family);
        font-size: calc(15 * var(--rpx));
        font-weight: 400;
        line-height: calc(18.15340805053711 * var(--rpx));
        text-align: center;
        white-space: nowrap;
        z-index: 42;
    }

    .video {
        width: calc(100% / 2); /* Độ rộng của video là 1/3 của rectangle-d */
        margin-top: 15%; /* Margin top là 10% của rectangle-d */
    }

    .flex-row {
        display: flex;
        align-items: center;
    }

        .flex-row > span {
            margin-right: 10px;
        }

    .element-course {
        position: relative;
        width: calc(33.33% - 20px); /* Chiếm 1/3 chiều rộng của flex container và cách nhau 20px */
        margin-right: 20px; /* Khoảng cách giữa các element-course */
        margin-bottom: calc(400 * var(--rpx)); /* Khoảng cách giữa các dòng */
    }

</style>
@{
    int studentLogedInId = 0;
    List<Coursera> courseras = null; // Khai báo ở ngoài phạm vi của block if và else

    if (Context.Session.GetString("LogedIn") != null)
    {
        studentLogedInId = int.Parse(Context.Session.GetString("LogedIn"));
    }
    if (TempData.ContainsKey("ListCoursera"))
    {
        courseras = TempData["ListCoursera"] as List<Coursera>;
    }
    else
    {
        courseras = null;
    }
}
<div class="material-symbols-search-rounded"></div>
<div class="rectangle-7">
    <div class="rectangle-8">
        <img src="../img/course/Rectangle 25.png" />
    </div>
    <span class="khoa-hoc-hang-dau">KHÓA HỌC HÀNG ĐẦU 2023</span>
    <div class="rectangle-9">
        <button class="giam-20-cho-khoa-hoc-dau-tien">
            Giảm 20% cho khóa học đầu tiên
        </button>
    </div>
    <span class="software-engineer">#Software engineer</span>
    <span class="graphic-design">#Graphic Design</span>
    <span class="language">#Language</span>
</div>
<div class="flex-row-ff">
    <div class="element-course">
        <a class="rectangle-a">
            <img src="../img/course/cpp_icon.png" />
        </a>
        <div class="rectangle-c">
            <div class="rectangle-d">
                <span class="tinh-nang-dang-phat-trien">Tính năng đang phát triển</span>
                <div class="flex-row">
                    <span class="c-basic">C++ Cơ Bản</span>
                    <video class="video" controls loop>
                        <source src="../video/english/Family.mp4" type="video/mp4">
                    </video>
                </div>
                <div class="flex-row-aa">
                    <span class="time">Time: 02/Th09 - 02/Th10 </span>
                </div>
                <div class="flex-row-c">
                    <span class="mo-ta">
                        Mô tả: 4 tuần học cơ bản.<br />Có bài test giữa khóa và cuối
                        khóa.
                    </span>
                </div>
                <div class="flex-row-cb">
                    <span class="software-engineer-f">#Software Engineer</span>
                </div>
                <div class="flex-row-b">
                    <span class="ky-thuat-phan-mem">#Kỹ Thuật Phần Mềm</span>
                </div>
            </div>
        </div>
    </div>
    @foreach (var course in courseras)
    {
        bool check = false;
        @foreach (var item in course.OnCoursera)
        {
            if (item.StudentId == studentLogedInId)
            {
                check = true;
            }
        }
        <div class="element-course">
            @if (studentLogedInId == 0)
            {
                <a href="@Url.Action("SignIn", "Access")" class="rectangle-a">
                    <img src="~/img/course/@course.Image" />
                </a>
            }
            else if(!check)
            {
                <a asp-controller="Payment" asp-action="PayCoursera" asp-route-id="@course.CourseraId" class="rectangle-a">
                    <img src="~/img/course/@course.Image" />
                </a>
            }
            else if(check)
            {
                <a href="@Url.Action("UniversityEnglishCourseSchedule", "Course", new { courseraId = course.CourseraId })" class="rectangle-a">
                    <img src="~/img/course/@course.Image" />
                </a>
            }
            <div class="rectangle-c">
                <div class="rectangle-d">
                    @if (check)
                    {
                        <span class="tinh-nang-dang-phat-trien text-success">Đã đăng kí</span>

                    }
                    else
                    {
                        if (studentLogedInId == 0)
                        {
                            <a asp-controller="Access" asp-action="SignIn" class="tinh-nang-dang-phat-trien">Chưa đăng kí => Ấn để đăng kí</a>
                        }
                        else
                        {
                            <a asp-controller="Payment" asp-action="PayCoursera" asp-route-id="@course.CourseraId" class="tinh-nang-dang-phat-trien">Chưa đăng kí => Ấn để đăng kí</a>
                        }

                    }
                    <div class="flex-row">
                        <span class="c-basic">@course.Name</span>
                        <video class="video" controls loop>
                            <source src="../video/english/Family.mp4" type="video/mp4">
                        </video>
                    </div>
                    <div class="flex-row-aa">
                        <span class="time">Thời gian: @course.TotalDate tuần </span>
                    </div>
                    <div class="flex-row-c">
                        <span class="mo-ta">
                            Mô tả: @course.Description
                        </span>
                    </div>
                    <div class="flex-row-cb">
                        <span class="software-engineer-f">#@course.HashTag </span>
                    </div>
                    <div class="flex-row-b">
                        <span class="ky-thuat-phan-mem">#@course.Major</span>
                    </div>

                </div>
            </div>
        </div>
    }
</div>
<script>
    // Lấy phần tử .main-container
    var mainContainer = document.querySelector('.main-container');

    // Lấy chiều cao ban đầu của .main-container
    var initialHeight = mainContainer.offsetHeight;

    // Lấy danh sách các phần tử .element-course
    var elementCourses = document.querySelectorAll('.element-course');

    // Tính toán và cập nhật chiều cao mới của .main-container dựa trên công thức mới
    function updateMainContainerHeight() {
        var newHeight = 997 + (elementCourses.length * 350); // Sử dụng công thức mới
        mainContainer.style.height = newHeight + 'px'; // Cập nhật chiều cao mới
    }

    // Gọi hàm cập nhật chiều cao mỗi khi thêm phần tử mới
    updateMainContainerHeight();

</script>